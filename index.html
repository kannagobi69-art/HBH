<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday Daughter</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@400;700&family=Pacifico&display=swap');

  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    background: linear-gradient(135deg, #fcefee, #fff9f7);
    font-family: 'Montserrat', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 1rem;
    overflow-x: hidden;
  }

  .container {
    position: relative;
    max-width: 340px;
    width: 100%;
    perspective: 1200px;
    margin-top: 80px;
  }

  .envelope {
    position: relative;
    width: 100%;
    height: 230px;
    background: linear-gradient(135deg, #d3546e, #e97c99);
    border-radius: 20px 20px 14px 14px;
    box-shadow: 0 8px 20px rgba(211, 84, 110, 0.6);
    overflow: visible;
  }

  .flap {
    position: absolute;
    top: 0;
    left: 50%;
    width: 100%;
    height: 140px;
    background: linear-gradient(135deg, #f9a6b2, #e94b6f);
    border-radius: 160px 160px 0 0;
    box-shadow: 0 6px 12px rgba(233, 75, 111, 0.5);
    transform-origin: bottom center;
    transform-style: preserve-3d;
    transition: transform 0.9s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    transform: translateX(-50%) rotateX(0deg);
    z-index: 3;
  }

  .card {
    position: absolute;
    top: 50px;
    left: 50%;
    width: 300px;
    min-height: 200px;
    background: #fff;
    border-radius: 18px;
    box-shadow: 0 12px 25px rgba(211, 84, 110, 0.35);
    transform: translateX(-50%) translateY(0) scale(0.72);
    opacity: 0;
    visibility: hidden;
    transition:
      transform 1s cubic-bezier(0.4, 0, 0.2, 1),
      opacity 1s ease,
      visibility 0s 1s;
    z-index: 2;
    padding: 1.5rem 1.5rem 1.2rem 1.5rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    color: #d3546e;
    user-select: none;
    overflow: hidden;
  }
  
  .card.open {
    transform: translateX(-50%) translateY(-220px) scale(1);
    opacity: 1;
    visibility: visible;
    transition:
      transform 1s cubic-bezier(0.4, 0, 0.2, 1),
      opacity 1s ease,
      visibility 0s 0s;
    box-shadow: 0 20px 40px rgba(211, 84, 110, 0.7);
  }

  /* Sparkle effects */
  .sparkle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #ffd700;
    border-radius: 50%;
    opacity: 0;
    animation: sparkleAnim 2s infinite;
    pointer-events: none;
  }

  @keyframes sparkleAnim {
    0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
    50% { opacity: 1; transform: scale(1) rotate(180deg); }
  }

  .sparkle:nth-child(1) { top: 10%; left: 5%; animation-delay: 0s; }
  .sparkle:nth-child(2) { top: 20%; right: 8%; animation-delay: 0.3s; }
  .sparkle:nth-child(3) { bottom: 15%; left: 10%; animation-delay: 0.6s; }
  .sparkle:nth-child(4) { bottom: 25%; right: 5%; animation-delay: 0.9s; }
  .sparkle:nth-child(5) { top: 50%; left: 2%; animation-delay: 1.2s; }
  .sparkle:nth-child(6) { top: 50%; right: 2%; animation-delay: 1.5s; }
  .sparkle:nth-child(7) { top: 5%; left: 50%; animation-delay: 0.4s; }
  .sparkle:nth-child(8) { bottom: 5%; left: 50%; animation-delay: 1s; }

  .card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    flex: 1;
  }

  .photo-frame {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    border: 3px solid #e97c99;
    overflow: hidden;
    margin-bottom: 0.5rem;
    box-shadow: 0 4px 10px rgba(211, 84, 110, 0.3);
    background: #f9f9f9;
  }

  .photo-frame img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .card h1 {
    font-family: 'Great Vibes', cursive;
    font-size: 1.8rem;
    margin: 0 0 0.2rem 0;
    font-weight: 700;
    letter-spacing: 0.02em;
    line-height: 1.1;
  }

  .card .name {
    font-family: 'Pacifico', cursive;
    font-size: 1.2rem;
    color: #7b2541;
    margin-bottom: 0.4rem;
    line-height: 1.1;
  }

  .card p.message {
    font-family: 'Montserrat', sans-serif;
    font-size: 0.75rem;
    margin: 0;
    font-weight: 500;
    color: #a73a5c;
    line-height: 1.3;
    min-height: 60px;
  }

  .card-footer {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-top: 0.5rem;
    padding-top: 0.3rem;
  }

  .date {
    font-family: 'Montserrat', sans-serif;
    font-size: 0.7rem;
    color: #b94f6a;
    font-weight: 600;
  }

  .signature {
    font-family: 'Great Vibes', cursive;
    font-size: 0.95rem;
    color: #7b2541;
    font-weight: 400;
  }

  button.open-btn {
    position: absolute;
    bottom: 16px;
    left: 50%;
    transform: translateX(-50%);
    background: #d3546e;
    border: none;
    border-radius: 28px;
    padding: 0.7rem 2.4rem;
    color: white;
    font-weight: 700;
    font-family: 'Montserrat', sans-serif;
    font-size: 1.05rem;
    cursor: pointer;
    box-shadow: 0 6px 14px rgba(211, 84, 110, 0.7);
    transition: background-color 0.3s ease;
    z-index: 4;
    user-select: none;
  }
  
  button.open-btn:hover,
  button.open-btn:focus {
    background: #f284a0;
    outline: none;
  }

  @media (max-width: 420px) {
    .container {
      max-width: 90vw;
    }
    .card {
      width: 95%;
      padding: 1.3rem 1.5rem;
    }
    .photo-frame {
      width: 60px;
      height: 60px;
    }
    .card h1 {
      font-size: 1.6rem;
    }
    .card .name {
      font-size: 1.1rem;
    }
    .card p.message {
      font-size: 0.7rem;
    }
    .card-footer {
      margin-top: 0.4rem;
    }
    .date {
      font-size: 0.65rem;
    }
    .signature {
      font-size: 0.9rem;
    }
    button.open-btn {
      padding: 0.55rem 1.8rem;
      font-size: 0.95rem;
    }
  }
</style>
</head>
<body>
  <div class="container" role="main" aria-label="Happy Birthday Greeting Card">
    <div class="envelope" aria-hidden="true">
      <div class="flap"></div>
    </div>
    <div class="card" aria-live="polite" aria-atomic="true" aria-hidden="true" id="greeting-card">
      <!-- Sparkle effects -->
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      <div class="sparkle"></div>
      
      <div class="card-content">
        <div class="photo-frame">
          <img src="daughter-photo.jpg" alt="Kannan" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Ccircle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22%23f9a6b2%22/%3E%3Ctext x=%2250%22 y=%2260%22 font-size=%2240%22 text-anchor=%22middle%22 fill=%22white%22%3Eâ™¥%3C/text%3E%3C/svg%3E'">
        </div>
        
        <h1>Happy Birthday!</h1>
        <div class="name">Dear Durga Lakshmi</div>
        <p class="message" id="typed-message"></p>
      </div>
      
      <div class="card-footer">
        <div class="date">10/11/2025</div>
        <div class="signature">Amma & Appa</div>
      </div>
    </div>
    <button class="open-btn" aria-pressed="false" aria-controls="greeting-card" type="button">Open</button>
    
    <!-- Hidden audio element -->
    <audio id="birthday-music" preload="auto">
      <source src="happy-birthday.mp3" type="audio/mpeg">
    </audio>
  </div>

<script>
  const openBtn = document.querySelector('.open-btn');
  const flap = document.querySelector('.flap');
  const card = document.querySelector('.card');
  const music = document.getElementById('birthday-music');
  const messageElement = document.getElementById('typed-message');
  
  const fullMessage = "May your special day be filled with joy, laughter, and beautiful moments. You are our precious gift and we love you more than words can express!";
  
  let typingTimeout;
  let isTyping = false;

  function typeMessage(text, element, speed = 50) {
    element.textContent = '';
    let index = 0;
    isTyping = true;
    
    function type() {
      if (index < text.length) {
        element.textContent += text.charAt(index);
        index++;
        typingTimeout = setTimeout(type, speed);
      } else {
        isTyping = false;
      }
    }
    type();
  }

  function stopTyping() {
    if (typingTimeout) {
      clearTimeout(typingTimeout);
      isTyping = false;
    }
    messageElement.textContent = '';
  }

  openBtn.addEventListener('click', () => {
    const isOpen = card.classList.contains('open');
    
    if (!isOpen) {
      // Open card
      flap.style.transform = 'translateX(-50%) rotateX(-160deg)';
      card.classList.add('open');
      card.setAttribute('aria-hidden', 'false');
      openBtn.setAttribute('aria-pressed', 'true');
      openBtn.textContent = 'Close';
      
      // Play music
      music.currentTime = 0;
      music.play().catch(err => console.log('Audio play failed:', err));
      
      // Start typing animation after card opens
      setTimeout(() => {
        typeMessage(fullMessage, messageElement, 50);
      }, 800);
      
    } else {
      // Close card
      flap.style.transform = 'translateX(-50%) rotateX(0deg)';
      card.classList.remove('open');
      card.setAttribute('aria-hidden', 'true');
      openBtn.setAttribute('aria-pressed', 'false');
      openBtn.textContent = 'Open';
      
      // Stop music
      music.pause();
      music.currentTime = 0;
      
      // Stop typing
      stopTyping();
    }
  });
</script>
</body>
</html>